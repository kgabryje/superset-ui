(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{2327:function(module,exports,__webpack_require__){eval("var api = __webpack_require__(262);\n            var content = __webpack_require__(2328);\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.i, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjMyNy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8vVXNlcnMva2FtaWxnYWJyeWplbHNraS9wcm9qZWN0cy9zdXBlcnNldC11aS9wbHVnaW5zL2xlZ2FjeS1wbHVnaW4tY2hhcnQtcm9zZS9zcmMvUm9zZS5jc3M/OGJiMiJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgYXBpID0gcmVxdWlyZShcIiEuLi8uLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbmplY3RTdHlsZXNJbnRvU3R5bGVUYWcuanNcIik7XG4gICAgICAgICAgICB2YXIgY29udGVudCA9IHJlcXVpcmUoXCIhIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvY2pzLmpzPz9yZWYtLTYtMSEuLi8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGNzcy1sb2FkZXIvc3JjL2luZGV4LmpzPz9wb3N0Y3NzIS4vUm9zZS5jc3NcIik7XG5cbiAgICAgICAgICAgIGNvbnRlbnQgPSBjb250ZW50Ll9fZXNNb2R1bGUgPyBjb250ZW50LmRlZmF1bHQgOiBjb250ZW50O1xuXG4gICAgICAgICAgICBpZiAodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgIGNvbnRlbnQgPSBbW21vZHVsZS5pZCwgY29udGVudCwgJyddXTtcbiAgICAgICAgICAgIH1cblxudmFyIG9wdGlvbnMgPSB7fTtcblxub3B0aW9ucy5pbnNlcnQgPSBcImhlYWRcIjtcbm9wdGlvbnMuc2luZ2xldG9uID0gZmFsc2U7XG5cbnZhciB1cGRhdGUgPSBhcGkoY29udGVudCwgb3B0aW9ucyk7XG5cbnZhciBleHBvcnRlZCA9IGNvbnRlbnQubG9jYWxzID8gY29udGVudC5sb2NhbHMgOiB7fTtcblxuXG5cbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0ZWQ7Il0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///2327\n")},2328:function(module,exports,__webpack_require__){eval('// Imports\nvar ___CSS_LOADER_API_IMPORT___ = __webpack_require__(263);\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.i, "/**\\n * Licensed to the Apache Software Foundation (ASF) under one\\n * or more contributor license agreements.  See the NOTICE file\\n * distributed with this work for additional information\\n * regarding copyright ownership.  The ASF licenses this file\\n * to you under the Apache License, Version 2.0 (the\\n * \\"License\\"); you may not use this file except in compliance\\n * with the License.  You may obtain a copy of the License at\\n *\\n *   http://www.apache.org/licenses/LICENSE-2.0\\n *\\n * Unless required by applicable law or agreed to in writing,\\n * software distributed under the License is distributed on an\\n * \\"AS IS\\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\\n * KIND, either express or implied.  See the License for the\\n * specific language governing permissions and limitations\\n * under the License.\\n */\\n\\n.superset-legacy-chart-rose path {\\n  transition: fill-opacity 180ms linear;\\n  stroke: #fff;\\n  stroke-width: 1px;\\n  stroke-opacity: 1;\\n  fill-opacity: 0.75;\\n}\\n\\n.superset-legacy-chart-rose text {\\n  font: 400 12px Arial, sans-serif;\\n  pointer-events: none;\\n}\\n\\n.superset-legacy-chart-rose .clickable path {\\n  cursor: pointer;\\n}\\n\\n.superset-legacy-chart-rose .hover path {\\n  fill-opacity: 1;\\n}\\n\\n.nv-legend .nv-series {\\n  cursor: pointer;\\n}\\n", ""]);\n// Exports\nmodule.exports = exports;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjMyOC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8vVXNlcnMva2FtaWxnYWJyeWplbHNraS9wcm9qZWN0cy9zdXBlcnNldC11aS9wbHVnaW5zL2xlZ2FjeS1wbHVnaW4tY2hhcnQtcm9zZS9zcmMvUm9zZS5jc3M/YzAxNyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBJbXBvcnRzXG52YXIgX19fQ1NTX0xPQURFUl9BUElfSU1QT1JUX19fID0gcmVxdWlyZShcIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9hcGkuanNcIik7XG5leHBvcnRzID0gX19fQ1NTX0xPQURFUl9BUElfSU1QT1JUX19fKGZhbHNlKTtcbi8vIE1vZHVsZVxuZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiLyoqXFxuICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxcbiAqIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxcbiAqIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXFxuICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxcbiAqIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcXG4gKiBcXFwiTGljZW5zZVxcXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXFxuICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxcbiAqXFxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcXG4gKlxcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcXG4gKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxcbiAqIFxcXCJBUyBJU1xcXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxcbiAqIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZVxcbiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcXG4gKiB1bmRlciB0aGUgTGljZW5zZS5cXG4gKi9cXG5cXG4uc3VwZXJzZXQtbGVnYWN5LWNoYXJ0LXJvc2UgcGF0aCB7XFxuICB0cmFuc2l0aW9uOiBmaWxsLW9wYWNpdHkgMTgwbXMgbGluZWFyO1xcbiAgc3Ryb2tlOiAjZmZmO1xcbiAgc3Ryb2tlLXdpZHRoOiAxcHg7XFxuICBzdHJva2Utb3BhY2l0eTogMTtcXG4gIGZpbGwtb3BhY2l0eTogMC43NTtcXG59XFxuXFxuLnN1cGVyc2V0LWxlZ2FjeS1jaGFydC1yb3NlIHRleHQge1xcbiAgZm9udDogNDAwIDEycHggQXJpYWwsIHNhbnMtc2VyaWY7XFxuICBwb2ludGVyLWV2ZW50czogbm9uZTtcXG59XFxuXFxuLnN1cGVyc2V0LWxlZ2FjeS1jaGFydC1yb3NlIC5jbGlja2FibGUgcGF0aCB7XFxuICBjdXJzb3I6IHBvaW50ZXI7XFxufVxcblxcbi5zdXBlcnNldC1sZWdhY3ktY2hhcnQtcm9zZSAuaG92ZXIgcGF0aCB7XFxuICBmaWxsLW9wYWNpdHk6IDE7XFxufVxcblxcbi5udi1sZWdlbmQgLm52LXNlcmllcyB7XFxuICBjdXJzb3I6IHBvaW50ZXI7XFxufVxcblwiLCBcIlwiXSk7XG4vLyBFeHBvcnRzXG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHM7XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///2328\n')},2513:function(module,__webpack_exports__,__webpack_require__){"use strict";eval('// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ../superset-ui-core/src/index.ts\nvar src = __webpack_require__(3);\n\n// EXTERNAL MODULE: /Users/kamilgabryjelski/projects/superset-ui/node_modules/core-js/modules/es.object.assign.js\nvar es_object_assign = __webpack_require__(48);\n\n// EXTERNAL MODULE: /Users/kamilgabryjelski/projects/superset-ui/node_modules/core-js/modules/web.dom-collections.iterator.js\nvar web_dom_collections_iterator = __webpack_require__(47);\n\n// EXTERNAL MODULE: /Users/kamilgabryjelski/projects/superset-ui/node_modules/d3/d3.js\nvar d3 = __webpack_require__(137);\nvar d3_default = /*#__PURE__*/__webpack_require__.n(d3);\n\n// EXTERNAL MODULE: /Users/kamilgabryjelski/projects/superset-ui/node_modules/prop-types/index.js\nvar prop_types = __webpack_require__(17);\nvar prop_types_default = /*#__PURE__*/__webpack_require__.n(prop_types);\n\n// EXTERNAL MODULE: /Users/kamilgabryjelski/projects/superset-ui/node_modules/nvd3/build/nv.d3.js\nvar nv_d3 = __webpack_require__(2326);\nvar nv_d3_default = /*#__PURE__*/__webpack_require__.n(nv_d3);\n\n// EXTERNAL MODULE: ../superset-ui-core/src/number-format/NumberFormatterRegistrySingleton.ts\nvar NumberFormatterRegistrySingleton = __webpack_require__(132);\n\n// EXTERNAL MODULE: ../superset-ui-core/src/time-format/TimeFormatterRegistrySingleton.ts + 5 modules\nvar TimeFormatterRegistrySingleton = __webpack_require__(120);\n\n// EXTERNAL MODULE: ../superset-ui-core/src/color/index.ts + 3 modules\nvar color = __webpack_require__(787);\n\n// EXTERNAL MODULE: /Users/kamilgabryjelski/projects/superset-ui/plugins/legacy-plugin-chart-rose/src/Rose.css\nvar Rose = __webpack_require__(2327);\n\n// CONCATENATED MODULE: /Users/kamilgabryjelski/projects/superset-ui/plugins/legacy-plugin-chart-rose/src/Rose.js\nfunction ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1,source;i<arguments.length;i++){source=null!=arguments[i]?arguments[i]:{};if(i%2){ownKeys(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0})}else{obj[key]=value}return obj}/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * "License"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */ /* eslint no-use-before-define: ["error", { "functions": false }] */ /* eslint-disable no-restricted-syntax */ /* eslint-disable react/sort-prop-types */const propTypes={// Data is an object hashed by numeric value, perhaps timestamp\ndata:prop_types_default.a.objectOf(prop_types_default.a.arrayOf(prop_types_default.a.shape({key:prop_types_default.a.arrayOf(prop_types_default.a.string),name:prop_types_default.a.arrayOf(prop_types_default.a.string),time:prop_types_default.a.number,value:prop_types_default.a.number}))),width:prop_types_default.a.number,height:prop_types_default.a.number,dateTimeFormat:prop_types_default.a.string,numberFormat:prop_types_default.a.string,useRichTooltip:prop_types_default.a.bool,useAreaProportions:prop_types_default.a.bool};function copyArc(d){return{startAngle:d.startAngle,endAngle:d.endAngle,innerRadius:d.innerRadius,outerRadius:d.outerRadius}}function sortValues(a,b){if(a.value===b.value){return a.name>b.name?1:-1}return b.value-a.value}function Rose_Rose(element,props){const{data,width,height,colorScheme,dateTimeFormat,numberFormat,useRichTooltip,useAreaProportions}=props,div=d3_default.a.select(element);div.classed("superset-legacy-chart-rose",!0);const datum=data,times=Object.keys(datum).map(t=>parseInt(t,10)).sort((a,b)=>a-b),numGrains=times.length,numGroups=datum[times[0]].length,format=Object(NumberFormatterRegistrySingleton["c" /* getNumberFormatter */])(numberFormat),timeFormat=Object(TimeFormatterRegistrySingleton["d" /* getTimeFormatter */])(dateTimeFormat),colorFn=color["b" /* CategoricalColorNamespace */].getScale(colorScheme);d3_default.a.select(".nvtooltip").remove();div.selectAll("*").remove();const arc=d3_default.a.svg.arc(),legend=nv_d3_default.a.models.legend(),tooltip=nv_d3_default.a.models.tooltip(),state={disabled:datum[times[0]].map(()=>!1)},svg=div.append("svg").attr("width",width).attr("height",height),g=svg.append("g").attr("class","rose").append("g"),legendWrap=g.append("g").attr("class","legendWrap");function legendData(adatum){return adatum[times[0]].map((v,i)=>({disabled:state.disabled[i],key:v.name}))}function tooltipData(d,i,adatum){const timeIndex=Math.floor(d.arcId/numGroups),series=useRichTooltip?adatum[times[timeIndex]].filter(v=>!state.disabled[v.id%numGroups]).map(v=>({key:v.name,value:v.value,color:colorFn(v.name),highlight:v.id===d.arcId})):[{key:d.name,value:d.val,color:colorFn(d.name)}];return{key:"Date",value:d.time,series}}legend.width(width).color(d=>colorFn(d.key));legendWrap.datum(legendData(datum)).call(legend);tooltip.headerFormatter(timeFormat).valueFormatter(format);// Compute max radius, which the largest value will occupy\nconst roseHeight=height-legend.height(),margin={top:legend.height()},maxRadius=Math.min(width,roseHeight)/2-35,labelThreshold=.05,gro=8,mini=.075,centerTranslate="translate(".concat(width/2,",").concat(roseHeight/2+margin.top,")"),roseWrap=g.append("g").attr("transform",centerTranslate).attr("class","roseWrap"),labelsWrap=g.append("g").attr("transform",centerTranslate).attr("class","labelsWrap"),groupLabelsWrap=g.append("g").attr("transform",centerTranslate).attr("class","groupLabelsWrap");// Compute inner and outer angles for each data point\nfunction computeArcStates(adatum){// Find the max sum of values across all time\nlet maxSum=0,grain=0;const sums=[];for(const t of times){const sum=datum[t].reduce((a,v,i)=>a+(state.disabled[i]?0:v.value),0);maxSum=sum>maxSum?sum:maxSum;sums[grain]=sum;grain++}// Compute angle occupied by each time grain\nconst dtheta=2*Math.PI/numGrains,angles=[];for(let i=0;i<=numGrains;i++){angles.push(dtheta*i-Math.PI/2)}// Compute proportion\nconst P=maxRadius/maxSum,computeOuterRadius=(value,innerRadius)=>useAreaProportions?Math.sqrt(P*maxRadius*value+innerRadius*innerRadius):P*value+innerRadius,arcSt={data:[],extend:{},push:{},pieStart:{},pie:{},pieOver:{},mini:{},labels:[],groupLabels:[]};let arcId=0;for(let i=0;i<numGrains;i++){const t=times[i],startAngle=angles[i],endAngle=angles[i+1],G=2*Math.PI/sums[i];let innerRadius=0,outerRadius,pieStartAngle=0,pieEndAngle;for(const v of adatum[t]){const val=state.disabled[arcId%numGroups]?0:v.value,{name,time}=v;v.id=arcId;outerRadius=computeOuterRadius(val,innerRadius);arcSt.data.push({startAngle,endAngle,innerRadius,outerRadius,name,arcId,val,time});arcSt.extend[arcId]={startAngle,endAngle,innerRadius,name,outerRadius:outerRadius+gro};arcSt.push[arcId]={startAngle,endAngle,innerRadius:innerRadius+gro,outerRadius:outerRadius+gro};arcSt.pieStart[arcId]={startAngle,endAngle,innerRadius:mini*maxRadius,outerRadius:maxRadius};arcSt.mini[arcId]={startAngle,endAngle,innerRadius:innerRadius*mini,outerRadius:outerRadius*mini};arcId++;innerRadius=outerRadius}const labelArc=_objectSpread({},arcSt.data[i*numGroups]);labelArc.outerRadius=maxRadius+20;labelArc.innerRadius=maxRadius+15;arcSt.labels.push(labelArc);for(const v of adatum[t].concat().sort(sortValues)){const val=state.disabled[v.id%numGroups]?0:v.value;pieEndAngle=G*val+pieStartAngle;arcSt.pie[v.id]={startAngle:pieStartAngle,endAngle:pieEndAngle,innerRadius:maxRadius*mini,outerRadius:maxRadius,percent:v.value/sums[i]};arcSt.pieOver[v.id]={startAngle:pieStartAngle,endAngle:pieEndAngle,innerRadius:maxRadius*mini,outerRadius:maxRadius+gro};pieStartAngle=pieEndAngle}}arcSt.groupLabels=arcSt.data.slice(0,numGroups);return arcSt}let arcSt=computeArcStates(datum);function tween(target,resFunc){return function(d){const interpolate=d3_default.a.interpolate(copyArc(d),copyArc(target));return t=>resFunc(Object.assign(d,interpolate(t)))}}function arcTween(target){return tween(target,d=>arc(d))}function translateTween(target){return tween(target,d=>"translate(".concat(arc.centroid(d),")"))}// Grab the ID range of segments stand between\n// this segment and the edge of the circle\nconst segmentsToEdgeCache={};function getSegmentsToEdge(arcId){if(segmentsToEdgeCache[arcId]){return segmentsToEdgeCache[arcId]}const timeIndex=Math.floor(arcId/numGroups);segmentsToEdgeCache[arcId]=[arcId+1,numGroups*(timeIndex+1)-1];return segmentsToEdgeCache[arcId]}// Get the IDs of all segments in a timeIndex\nconst segmentsInTimeCache={};function getSegmentsInTime(arcId){if(segmentsInTimeCache[arcId]){return segmentsInTimeCache[arcId]}const timeIndex=Math.floor(arcId/numGroups);segmentsInTimeCache[arcId]=[timeIndex*numGroups,(timeIndex+1)*numGroups-1];return segmentsInTimeCache[arcId]}let clickId=-1,inTransition=!1;const ae=roseWrap.selectAll("g").data(JSON.parse(JSON.stringify(arcSt.data)))// deep copy data state\n.enter().append("g").attr("class","segment").classed("clickable",!0).on("mouseover",mouseover).on("mouseout",mouseout).on("mousemove",function(){tooltip()}).on("click",click),labels=labelsWrap.selectAll("g").data(JSON.parse(JSON.stringify(arcSt.labels))).enter().append("g").attr("class","roseLabel").attr("transform",d=>"translate(".concat(arc.centroid(d),")"));labels.append("text").style("text-anchor","middle").style("fill","#000").text(d=>timeFormat(d.time));const groupLabels=groupLabelsWrap.selectAll("g").data(JSON.parse(JSON.stringify(arcSt.groupLabels))).enter().append("g");groupLabels.style("opacity",0).attr("class","roseGroupLabels").append("text").style("text-anchor","middle").style("fill","#000").text(d=>d.name);const arcs=ae.append("path").attr("class","arc").attr("fill",d=>colorFn(d.name)).attr("d",arc);function mouseover(b,i){tooltip.data(tooltipData(b,i,datum)).hidden(!1);const $this=d3_default.a.select(this);$this.classed("hover",!0);if(0>clickId&&!inTransition){$this.select("path").interrupt().transition().duration(180).attrTween("d",arcTween(arcSt.extend[i]));const edge=getSegmentsToEdge(i);arcs.filter(d=>edge[0]<=d.arcId&&d.arcId<=edge[1]).interrupt().transition().duration(180).attrTween("d",d=>arcTween(arcSt.push[d.arcId])(d))}else if(!inTransition){const segments=getSegmentsInTime(clickId);if(segments[0]<=b.arcId&&b.arcId<=segments[1]){$this.select("path").interrupt().transition().duration(180).attrTween("d",arcTween(arcSt.pieOver[i]))}}}function mouseout(b,i){tooltip.hidden(!0);const $this=d3_default.a.select(this);$this.classed("hover",!1);if(0>clickId&&!inTransition){$this.select("path").interrupt().transition().duration(180).attrTween("d",arcTween(arcSt.data[i]));const edge=getSegmentsToEdge(i);arcs.filter(d=>edge[0]<=d.arcId&&d.arcId<=edge[1]).interrupt().transition().duration(180).attrTween("d",d=>arcTween(arcSt.data[d.arcId])(d))}else if(!inTransition){const segments=getSegmentsInTime(clickId);if(segments[0]<=b.arcId&&b.arcId<=segments[1]){$this.select("path").interrupt().transition().duration(180).attrTween("d",arcTween(arcSt.pie[i]))}}}function click(b,i){if(inTransition){return}const delay=d3_default.a.event.altKey?3750:375,segments=getSegmentsInTime(i);if(0>clickId){inTransition=!0;clickId=i;labels.interrupt().transition().duration(delay).attrTween("transform",d=>translateTween({outerRadius:0,innerRadius:0,startAngle:d.startAngle,endAngle:d.endAngle})(d)).style("opacity",0);groupLabels.attr("transform","translate(".concat(arc.centroid({outerRadius:maxRadius+20,innerRadius:maxRadius+15,startAngle:arcSt.data[i].startAngle,endAngle:arcSt.data[i].endAngle}),")")).interrupt().transition().delay(delay).duration(delay).attrTween("transform",d=>translateTween({outerRadius:maxRadius+20,innerRadius:maxRadius+15,startAngle:arcSt.pie[segments[0]+d.arcId].startAngle,endAngle:arcSt.pie[segments[0]+d.arcId].endAngle})(d)).style("opacity",d=>state.disabled[d.arcId]||arcSt.pie[segments[0]+d.arcId].percent<labelThreshold?0:1);ae.classed("clickable",d=>segments[0]>d.arcId||d.arcId>segments[1]);arcs.filter(d=>segments[0]<=d.arcId&&d.arcId<=segments[1]).interrupt().transition().duration(delay).attrTween("d",d=>arcTween(arcSt.pieStart[d.arcId])(d)).transition().duration(delay).attrTween("d",d=>arcTween(arcSt.pie[d.arcId])(d)).each("end",()=>{inTransition=!1});arcs.filter(d=>segments[0]>d.arcId||d.arcId>segments[1]).interrupt().transition().duration(delay).attrTween("d",d=>arcTween(arcSt.mini[d.arcId])(d))}else if(clickId<segments[0]||segments[1]<clickId){inTransition=!0;const clickSegments=getSegmentsInTime(clickId);labels.interrupt().transition().delay(delay).duration(delay).attrTween("transform",d=>translateTween(arcSt.labels[d.arcId/numGroups])(d)).style("opacity",1);groupLabels.interrupt().transition().duration(delay).attrTween("transform",translateTween({outerRadius:maxRadius+20,innerRadius:maxRadius+15,startAngle:arcSt.data[clickId].startAngle,endAngle:arcSt.data[clickId].endAngle})).style("opacity",0);ae.classed("clickable",!0);arcs.filter(d=>clickSegments[0]<=d.arcId&&d.arcId<=clickSegments[1]).interrupt().transition().duration(delay).attrTween("d",d=>arcTween(arcSt.pieStart[d.arcId])(d)).transition().duration(delay).attrTween("d",d=>arcTween(arcSt.data[d.arcId])(d)).each("end",()=>{clickId=-1;inTransition=!1});arcs.filter(d=>clickSegments[0]>d.arcId||d.arcId>clickSegments[1]).interrupt().transition().delay(delay).duration(delay).attrTween("d",d=>arcTween(arcSt.data[d.arcId])(d))}}function updateActive(){const delay=d3_default.a.event.altKey?3e3:300;legendWrap.datum(legendData(datum)).call(legend);const nArcSt=computeArcStates(datum);inTransition=!0;if(0>clickId){arcs.style("opacity",1).interrupt().transition().duration(delay).attrTween("d",d=>arcTween(nArcSt.data[d.arcId])(d)).each("end",()=>{inTransition=!1;arcSt=nArcSt}).transition().duration(0).style("opacity",d=>state.disabled[d.arcId%numGroups]?0:1)}else{const segments=getSegmentsInTime(clickId);arcs.style("opacity",1).interrupt().transition().duration(delay).attrTween("d",d=>segments[0]<=d.arcId&&d.arcId<=segments[1]?arcTween(nArcSt.pie[d.arcId])(d):arcTween(nArcSt.mini[d.arcId])(d)).each("end",()=>{inTransition=!1;arcSt=nArcSt}).transition().duration(0).style("opacity",d=>state.disabled[d.arcId%numGroups]?0:1);groupLabels.interrupt().transition().duration(delay).attrTween("transform",d=>translateTween({outerRadius:maxRadius+20,innerRadius:maxRadius+15,startAngle:nArcSt.pie[segments[0]+d.arcId].startAngle,endAngle:nArcSt.pie[segments[0]+d.arcId].endAngle})(d)).style("opacity",d=>state.disabled[d.arcId]||arcSt.pie[segments[0]+d.arcId].percent<labelThreshold?0:1)}}legend.dispatch.on("stateChange",newState=>{if(state.disabled!==newState.disabled){state.disabled=newState.disabled;updateActive()}})}Rose_Rose.displayName="Rose";Rose_Rose.propTypes=propTypes;/* harmony default export */ var src_Rose = (Rose_Rose);\n// CONCATENATED MODULE: /Users/kamilgabryjelski/projects/superset-ui/plugins/legacy-plugin-chart-rose/src/ReactRose.js\n/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * "License"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n *//* harmony default export */ var ReactRose = __webpack_exports__["default"] = (Object(src["reactify"])(src_Rose));//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjUxMy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8vVXNlcnMva2FtaWxnYWJyeWplbHNraS9wcm9qZWN0cy9zdXBlcnNldC11aS9wbHVnaW5zL2xlZ2FjeS1wbHVnaW4tY2hhcnQtcm9zZS9zcmMvUm9zZS5qcz8zMWVjIiwid2VicGFjazovLy8vVXNlcnMva2FtaWxnYWJyeWplbHNraS9wcm9qZWN0cy9zdXBlcnNldC11aS9wbHVnaW5zL2xlZ2FjeS1wbHVnaW4tY2hhcnQtcm9zZS9zcmMvUmVhY3RSb3NlLmpzPzViY2MiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXG4gKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcbiAqIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXG4gKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXG4gKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXG4gKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2VcbiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcbiAqIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXG4gKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxuICogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXG4gKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXG4gKiB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyogZXNsaW50IG5vLXVzZS1iZWZvcmUtZGVmaW5lOiBbXCJlcnJvclwiLCB7IFwiZnVuY3Rpb25zXCI6IGZhbHNlIH1dICovXG4vKiBlc2xpbnQtZGlzYWJsZSBuby1yZXN0cmljdGVkLXN5bnRheCAqL1xuLyogZXNsaW50LWRpc2FibGUgcmVhY3Qvc29ydC1wcm9wLXR5cGVzICovXG5pbXBvcnQgZDMgZnJvbSAnZDMnO1xuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcbmltcG9ydCBudiBmcm9tICdudmQzJztcbmltcG9ydCB7IGdldFRpbWVGb3JtYXR0ZXIsIGdldE51bWJlckZvcm1hdHRlciwgQ2F0ZWdvcmljYWxDb2xvck5hbWVzcGFjZSB9IGZyb20gJ0BzdXBlcnNldC11aS9jb3JlJztcbmltcG9ydCAnLi9Sb3NlLmNzcyc7XG5cbmNvbnN0IHByb3BUeXBlcyA9IHtcbiAgLy8gRGF0YSBpcyBhbiBvYmplY3QgaGFzaGVkIGJ5IG51bWVyaWMgdmFsdWUsIHBlcmhhcHMgdGltZXN0YW1wXG4gIGRhdGE6IFByb3BUeXBlcy5vYmplY3RPZihcbiAgICBQcm9wVHlwZXMuYXJyYXlPZihcbiAgICAgIFByb3BUeXBlcy5zaGFwZSh7XG4gICAgICAgIGtleTogUHJvcFR5cGVzLmFycmF5T2YoUHJvcFR5cGVzLnN0cmluZyksXG4gICAgICAgIG5hbWU6IFByb3BUeXBlcy5hcnJheU9mKFByb3BUeXBlcy5zdHJpbmcpLFxuICAgICAgICB0aW1lOiBQcm9wVHlwZXMubnVtYmVyLFxuICAgICAgICB2YWx1ZTogUHJvcFR5cGVzLm51bWJlcixcbiAgICAgIH0pLFxuICAgICksXG4gICksXG4gIHdpZHRoOiBQcm9wVHlwZXMubnVtYmVyLFxuICBoZWlnaHQ6IFByb3BUeXBlcy5udW1iZXIsXG4gIGRhdGVUaW1lRm9ybWF0OiBQcm9wVHlwZXMuc3RyaW5nLFxuICBudW1iZXJGb3JtYXQ6IFByb3BUeXBlcy5zdHJpbmcsXG4gIHVzZVJpY2hUb29sdGlwOiBQcm9wVHlwZXMuYm9vbCxcbiAgdXNlQXJlYVByb3BvcnRpb25zOiBQcm9wVHlwZXMuYm9vbCxcbn07XG5cbmZ1bmN0aW9uIGNvcHlBcmMoZCkge1xuICByZXR1cm4ge1xuICAgIHN0YXJ0QW5nbGU6IGQuc3RhcnRBbmdsZSxcbiAgICBlbmRBbmdsZTogZC5lbmRBbmdsZSxcbiAgICBpbm5lclJhZGl1czogZC5pbm5lclJhZGl1cyxcbiAgICBvdXRlclJhZGl1czogZC5vdXRlclJhZGl1cyxcbiAgfTtcbn1cblxuZnVuY3Rpb24gc29ydFZhbHVlcyhhLCBiKSB7XG4gIGlmIChhLnZhbHVlID09PSBiLnZhbHVlKSB7XG4gICAgcmV0dXJuIGEubmFtZSA+IGIubmFtZSA/IDEgOiAtMTtcbiAgfVxuXG4gIHJldHVybiBiLnZhbHVlIC0gYS52YWx1ZTtcbn1cblxuZnVuY3Rpb24gUm9zZShlbGVtZW50LCBwcm9wcykge1xuICBjb25zdCB7XG4gICAgZGF0YSxcbiAgICB3aWR0aCxcbiAgICBoZWlnaHQsXG4gICAgY29sb3JTY2hlbWUsXG4gICAgZGF0ZVRpbWVGb3JtYXQsXG4gICAgbnVtYmVyRm9ybWF0LFxuICAgIHVzZVJpY2hUb29sdGlwLFxuICAgIHVzZUFyZWFQcm9wb3J0aW9ucyxcbiAgfSA9IHByb3BzO1xuXG4gIGNvbnN0IGRpdiA9IGQzLnNlbGVjdChlbGVtZW50KTtcbiAgZGl2LmNsYXNzZWQoJ3N1cGVyc2V0LWxlZ2FjeS1jaGFydC1yb3NlJywgdHJ1ZSk7XG5cbiAgY29uc3QgZGF0dW0gPSBkYXRhO1xuICBjb25zdCB0aW1lcyA9IE9iamVjdC5rZXlzKGRhdHVtKVxuICAgIC5tYXAodCA9PiBwYXJzZUludCh0LCAxMCkpXG4gICAgLnNvcnQoKGEsIGIpID0+IGEgLSBiKTtcbiAgY29uc3QgbnVtR3JhaW5zID0gdGltZXMubGVuZ3RoO1xuICBjb25zdCBudW1Hcm91cHMgPSBkYXR1bVt0aW1lc1swXV0ubGVuZ3RoO1xuICBjb25zdCBmb3JtYXQgPSBnZXROdW1iZXJGb3JtYXR0ZXIobnVtYmVyRm9ybWF0KTtcbiAgY29uc3QgdGltZUZvcm1hdCA9IGdldFRpbWVGb3JtYXR0ZXIoZGF0ZVRpbWVGb3JtYXQpO1xuICBjb25zdCBjb2xvckZuID0gQ2F0ZWdvcmljYWxDb2xvck5hbWVzcGFjZS5nZXRTY2FsZShjb2xvclNjaGVtZSk7XG5cbiAgZDMuc2VsZWN0KCcubnZ0b29sdGlwJykucmVtb3ZlKCk7XG4gIGRpdi5zZWxlY3RBbGwoJyonKS5yZW1vdmUoKTtcblxuICBjb25zdCBhcmMgPSBkMy5zdmcuYXJjKCk7XG4gIGNvbnN0IGxlZ2VuZCA9IG52Lm1vZGVscy5sZWdlbmQoKTtcbiAgY29uc3QgdG9vbHRpcCA9IG52Lm1vZGVscy50b29sdGlwKCk7XG4gIGNvbnN0IHN0YXRlID0geyBkaXNhYmxlZDogZGF0dW1bdGltZXNbMF1dLm1hcCgoKSA9PiBmYWxzZSkgfTtcblxuICBjb25zdCBzdmcgPSBkaXYuYXBwZW5kKCdzdmcnKS5hdHRyKCd3aWR0aCcsIHdpZHRoKS5hdHRyKCdoZWlnaHQnLCBoZWlnaHQpO1xuXG4gIGNvbnN0IGcgPSBzdmcuYXBwZW5kKCdnJykuYXR0cignY2xhc3MnLCAncm9zZScpLmFwcGVuZCgnZycpO1xuXG4gIGNvbnN0IGxlZ2VuZFdyYXAgPSBnLmFwcGVuZCgnZycpLmF0dHIoJ2NsYXNzJywgJ2xlZ2VuZFdyYXAnKTtcblxuICBmdW5jdGlvbiBsZWdlbmREYXRhKGFkYXR1bSkge1xuICAgIHJldHVybiBhZGF0dW1bdGltZXNbMF1dLm1hcCgodiwgaSkgPT4gKHtcbiAgICAgIGRpc2FibGVkOiBzdGF0ZS5kaXNhYmxlZFtpXSxcbiAgICAgIGtleTogdi5uYW1lLFxuICAgIH0pKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHRvb2x0aXBEYXRhKGQsIGksIGFkYXR1bSkge1xuICAgIGNvbnN0IHRpbWVJbmRleCA9IE1hdGguZmxvb3IoZC5hcmNJZCAvIG51bUdyb3Vwcyk7XG4gICAgY29uc3Qgc2VyaWVzID0gdXNlUmljaFRvb2x0aXBcbiAgICAgID8gYWRhdHVtW3RpbWVzW3RpbWVJbmRleF1dXG4gICAgICAgICAgLmZpbHRlcih2ID0+ICFzdGF0ZS5kaXNhYmxlZFt2LmlkICUgbnVtR3JvdXBzXSlcbiAgICAgICAgICAubWFwKHYgPT4gKHtcbiAgICAgICAgICAgIGtleTogdi5uYW1lLFxuICAgICAgICAgICAgdmFsdWU6IHYudmFsdWUsXG4gICAgICAgICAgICBjb2xvcjogY29sb3JGbih2Lm5hbWUpLFxuICAgICAgICAgICAgaGlnaGxpZ2h0OiB2LmlkID09PSBkLmFyY0lkLFxuICAgICAgICAgIH0pKVxuICAgICAgOiBbeyBrZXk6IGQubmFtZSwgdmFsdWU6IGQudmFsLCBjb2xvcjogY29sb3JGbihkLm5hbWUpIH1dO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGtleTogJ0RhdGUnLFxuICAgICAgdmFsdWU6IGQudGltZSxcbiAgICAgIHNlcmllcyxcbiAgICB9O1xuICB9XG5cbiAgbGVnZW5kLndpZHRoKHdpZHRoKS5jb2xvcihkID0+IGNvbG9yRm4oZC5rZXkpKTtcbiAgbGVnZW5kV3JhcC5kYXR1bShsZWdlbmREYXRhKGRhdHVtKSkuY2FsbChsZWdlbmQpO1xuXG4gIHRvb2x0aXAuaGVhZGVyRm9ybWF0dGVyKHRpbWVGb3JtYXQpLnZhbHVlRm9ybWF0dGVyKGZvcm1hdCk7XG5cbiAgLy8gQ29tcHV0ZSBtYXggcmFkaXVzLCB3aGljaCB0aGUgbGFyZ2VzdCB2YWx1ZSB3aWxsIG9jY3VweVxuICBjb25zdCByb3NlSGVpZ2h0ID0gaGVpZ2h0IC0gbGVnZW5kLmhlaWdodCgpO1xuICBjb25zdCBtYXJnaW4gPSB7IHRvcDogbGVnZW5kLmhlaWdodCgpIH07XG4gIGNvbnN0IGVkZ2VNYXJnaW4gPSAzNTsgLy8gc3BhY2UgYmV0d2VlbiBvdXRlcm1vc3QgcmFkaXVzIGFuZCBzbGljZSBlZGdlXG4gIGNvbnN0IG1heFJhZGl1cyA9IE1hdGgubWluKHdpZHRoLCByb3NlSGVpZ2h0KSAvIDIgLSBlZGdlTWFyZ2luO1xuICBjb25zdCBsYWJlbFRocmVzaG9sZCA9IDAuMDU7XG4gIGNvbnN0IGdybyA9IDg7IC8vIG1vdXNlb3ZlciByYWRpdXMgZ3Jvd3RoIGluIHBpeGVsc1xuICBjb25zdCBtaW5pID0gMC4wNzU7XG5cbiAgY29uc3QgY2VudGVyVHJhbnNsYXRlID0gYHRyYW5zbGF0ZSgke3dpZHRoIC8gMn0sJHtyb3NlSGVpZ2h0IC8gMiArIG1hcmdpbi50b3B9KWA7XG4gIGNvbnN0IHJvc2VXcmFwID0gZy5hcHBlbmQoJ2cnKS5hdHRyKCd0cmFuc2Zvcm0nLCBjZW50ZXJUcmFuc2xhdGUpLmF0dHIoJ2NsYXNzJywgJ3Jvc2VXcmFwJyk7XG5cbiAgY29uc3QgbGFiZWxzV3JhcCA9IGcuYXBwZW5kKCdnJykuYXR0cigndHJhbnNmb3JtJywgY2VudGVyVHJhbnNsYXRlKS5hdHRyKCdjbGFzcycsICdsYWJlbHNXcmFwJyk7XG5cbiAgY29uc3QgZ3JvdXBMYWJlbHNXcmFwID0gZ1xuICAgIC5hcHBlbmQoJ2cnKVxuICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCBjZW50ZXJUcmFuc2xhdGUpXG4gICAgLmF0dHIoJ2NsYXNzJywgJ2dyb3VwTGFiZWxzV3JhcCcpO1xuXG4gIC8vIENvbXB1dGUgaW5uZXIgYW5kIG91dGVyIGFuZ2xlcyBmb3IgZWFjaCBkYXRhIHBvaW50XG4gIGZ1bmN0aW9uIGNvbXB1dGVBcmNTdGF0ZXMoYWRhdHVtKSB7XG4gICAgLy8gRmluZCB0aGUgbWF4IHN1bSBvZiB2YWx1ZXMgYWNyb3NzIGFsbCB0aW1lXG4gICAgbGV0IG1heFN1bSA9IDA7XG4gICAgbGV0IGdyYWluID0gMDtcbiAgICBjb25zdCBzdW1zID0gW107XG4gICAgZm9yIChjb25zdCB0IG9mIHRpbWVzKSB7XG4gICAgICBjb25zdCBzdW0gPSBkYXR1bVt0XS5yZWR1Y2UoKGEsIHYsIGkpID0+IGEgKyAoc3RhdGUuZGlzYWJsZWRbaV0gPyAwIDogdi52YWx1ZSksIDApO1xuICAgICAgbWF4U3VtID0gc3VtID4gbWF4U3VtID8gc3VtIDogbWF4U3VtO1xuICAgICAgc3Vtc1tncmFpbl0gPSBzdW07XG4gICAgICBncmFpbisrO1xuICAgIH1cblxuICAgIC8vIENvbXB1dGUgYW5nbGUgb2NjdXBpZWQgYnkgZWFjaCB0aW1lIGdyYWluXG4gICAgY29uc3QgZHRoZXRhID0gKE1hdGguUEkgKiAyKSAvIG51bUdyYWlucztcbiAgICBjb25zdCBhbmdsZXMgPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8PSBudW1HcmFpbnM7IGkrKykge1xuICAgICAgYW5nbGVzLnB1c2goZHRoZXRhICogaSAtIE1hdGguUEkgLyAyKTtcbiAgICB9XG5cbiAgICAvLyBDb21wdXRlIHByb3BvcnRpb25cbiAgICBjb25zdCBQID0gbWF4UmFkaXVzIC8gbWF4U3VtO1xuICAgIGNvbnN0IFEgPSBQICogbWF4UmFkaXVzO1xuICAgIGNvbnN0IGNvbXB1dGVPdXRlclJhZGl1cyA9ICh2YWx1ZSwgaW5uZXJSYWRpdXMpID0+XG4gICAgICB1c2VBcmVhUHJvcG9ydGlvbnNcbiAgICAgICAgPyBNYXRoLnNxcnQoUSAqIHZhbHVlICsgaW5uZXJSYWRpdXMgKiBpbm5lclJhZGl1cylcbiAgICAgICAgOiBQICogdmFsdWUgKyBpbm5lclJhZGl1cztcblxuICAgIGNvbnN0IGFyY1N0ID0ge1xuICAgICAgZGF0YTogW10sXG4gICAgICBleHRlbmQ6IHt9LFxuICAgICAgcHVzaDoge30sXG4gICAgICBwaWVTdGFydDoge30sXG4gICAgICBwaWU6IHt9LFxuICAgICAgcGllT3Zlcjoge30sXG4gICAgICBtaW5pOiB7fSxcbiAgICAgIGxhYmVsczogW10sXG4gICAgICBncm91cExhYmVsczogW10sXG4gICAgfTtcbiAgICBsZXQgYXJjSWQgPSAwO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtR3JhaW5zOyBpKyspIHtcbiAgICAgIGNvbnN0IHQgPSB0aW1lc1tpXTtcbiAgICAgIGNvbnN0IHN0YXJ0QW5nbGUgPSBhbmdsZXNbaV07XG4gICAgICBjb25zdCBlbmRBbmdsZSA9IGFuZ2xlc1tpICsgMV07XG4gICAgICBjb25zdCBHID0gKDIgKiBNYXRoLlBJKSAvIHN1bXNbaV07XG4gICAgICBsZXQgaW5uZXJSYWRpdXMgPSAwO1xuICAgICAgbGV0IG91dGVyUmFkaXVzO1xuICAgICAgbGV0IHBpZVN0YXJ0QW5nbGUgPSAwO1xuICAgICAgbGV0IHBpZUVuZEFuZ2xlO1xuICAgICAgZm9yIChjb25zdCB2IG9mIGFkYXR1bVt0XSkge1xuICAgICAgICBjb25zdCB2YWwgPSBzdGF0ZS5kaXNhYmxlZFthcmNJZCAlIG51bUdyb3Vwc10gPyAwIDogdi52YWx1ZTtcbiAgICAgICAgY29uc3QgeyBuYW1lLCB0aW1lIH0gPSB2O1xuICAgICAgICB2LmlkID0gYXJjSWQ7XG4gICAgICAgIG91dGVyUmFkaXVzID0gY29tcHV0ZU91dGVyUmFkaXVzKHZhbCwgaW5uZXJSYWRpdXMpO1xuICAgICAgICBhcmNTdC5kYXRhLnB1c2goeyBzdGFydEFuZ2xlLCBlbmRBbmdsZSwgaW5uZXJSYWRpdXMsIG91dGVyUmFkaXVzLCBuYW1lLCBhcmNJZCwgdmFsLCB0aW1lIH0pO1xuICAgICAgICBhcmNTdC5leHRlbmRbYXJjSWRdID0ge1xuICAgICAgICAgIHN0YXJ0QW5nbGUsXG4gICAgICAgICAgZW5kQW5nbGUsXG4gICAgICAgICAgaW5uZXJSYWRpdXMsXG4gICAgICAgICAgbmFtZSxcbiAgICAgICAgICBvdXRlclJhZGl1czogb3V0ZXJSYWRpdXMgKyBncm8sXG4gICAgICAgIH07XG4gICAgICAgIGFyY1N0LnB1c2hbYXJjSWRdID0ge1xuICAgICAgICAgIHN0YXJ0QW5nbGUsXG4gICAgICAgICAgZW5kQW5nbGUsXG4gICAgICAgICAgaW5uZXJSYWRpdXM6IGlubmVyUmFkaXVzICsgZ3JvLFxuICAgICAgICAgIG91dGVyUmFkaXVzOiBvdXRlclJhZGl1cyArIGdybyxcbiAgICAgICAgfTtcbiAgICAgICAgYXJjU3QucGllU3RhcnRbYXJjSWRdID0ge1xuICAgICAgICAgIHN0YXJ0QW5nbGUsXG4gICAgICAgICAgZW5kQW5nbGUsXG4gICAgICAgICAgaW5uZXJSYWRpdXM6IG1pbmkgKiBtYXhSYWRpdXMsXG4gICAgICAgICAgb3V0ZXJSYWRpdXM6IG1heFJhZGl1cyxcbiAgICAgICAgfTtcbiAgICAgICAgYXJjU3QubWluaVthcmNJZF0gPSB7XG4gICAgICAgICAgc3RhcnRBbmdsZSxcbiAgICAgICAgICBlbmRBbmdsZSxcbiAgICAgICAgICBpbm5lclJhZGl1czogaW5uZXJSYWRpdXMgKiBtaW5pLFxuICAgICAgICAgIG91dGVyUmFkaXVzOiBvdXRlclJhZGl1cyAqIG1pbmksXG4gICAgICAgIH07XG4gICAgICAgIGFyY0lkKys7XG4gICAgICAgIGlubmVyUmFkaXVzID0gb3V0ZXJSYWRpdXM7XG4gICAgICB9XG4gICAgICBjb25zdCBsYWJlbEFyYyA9IHsgLi4uYXJjU3QuZGF0YVtpICogbnVtR3JvdXBzXSB9O1xuICAgICAgbGFiZWxBcmMub3V0ZXJSYWRpdXMgPSBtYXhSYWRpdXMgKyAyMDtcbiAgICAgIGxhYmVsQXJjLmlubmVyUmFkaXVzID0gbWF4UmFkaXVzICsgMTU7XG4gICAgICBhcmNTdC5sYWJlbHMucHVzaChsYWJlbEFyYyk7XG4gICAgICBmb3IgKGNvbnN0IHYgb2YgYWRhdHVtW3RdLmNvbmNhdCgpLnNvcnQoc29ydFZhbHVlcykpIHtcbiAgICAgICAgY29uc3QgdmFsID0gc3RhdGUuZGlzYWJsZWRbdi5pZCAlIG51bUdyb3Vwc10gPyAwIDogdi52YWx1ZTtcbiAgICAgICAgcGllRW5kQW5nbGUgPSBHICogdmFsICsgcGllU3RhcnRBbmdsZTtcbiAgICAgICAgYXJjU3QucGllW3YuaWRdID0ge1xuICAgICAgICAgIHN0YXJ0QW5nbGU6IHBpZVN0YXJ0QW5nbGUsXG4gICAgICAgICAgZW5kQW5nbGU6IHBpZUVuZEFuZ2xlLFxuICAgICAgICAgIGlubmVyUmFkaXVzOiBtYXhSYWRpdXMgKiBtaW5pLFxuICAgICAgICAgIG91dGVyUmFkaXVzOiBtYXhSYWRpdXMsXG4gICAgICAgICAgcGVyY2VudDogdi52YWx1ZSAvIHN1bXNbaV0sXG4gICAgICAgIH07XG4gICAgICAgIGFyY1N0LnBpZU92ZXJbdi5pZF0gPSB7XG4gICAgICAgICAgc3RhcnRBbmdsZTogcGllU3RhcnRBbmdsZSxcbiAgICAgICAgICBlbmRBbmdsZTogcGllRW5kQW5nbGUsXG4gICAgICAgICAgaW5uZXJSYWRpdXM6IG1heFJhZGl1cyAqIG1pbmksXG4gICAgICAgICAgb3V0ZXJSYWRpdXM6IG1heFJhZGl1cyArIGdybyxcbiAgICAgICAgfTtcbiAgICAgICAgcGllU3RhcnRBbmdsZSA9IHBpZUVuZEFuZ2xlO1xuICAgICAgfVxuICAgIH1cbiAgICBhcmNTdC5ncm91cExhYmVscyA9IGFyY1N0LmRhdGEuc2xpY2UoMCwgbnVtR3JvdXBzKTtcblxuICAgIHJldHVybiBhcmNTdDtcbiAgfVxuXG4gIGxldCBhcmNTdCA9IGNvbXB1dGVBcmNTdGF0ZXMoZGF0dW0pO1xuXG4gIGZ1bmN0aW9uIHR3ZWVuKHRhcmdldCwgcmVzRnVuYykge1xuICAgIHJldHVybiBmdW5jdGlvbiBkb1R3ZWVuKGQpIHtcbiAgICAgIGNvbnN0IGludGVycG9sYXRlID0gZDMuaW50ZXJwb2xhdGUoY29weUFyYyhkKSwgY29weUFyYyh0YXJnZXQpKTtcblxuICAgICAgcmV0dXJuIHQgPT4gcmVzRnVuYyhPYmplY3QuYXNzaWduKGQsIGludGVycG9sYXRlKHQpKSk7XG4gICAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGFyY1R3ZWVuKHRhcmdldCkge1xuICAgIHJldHVybiB0d2Vlbih0YXJnZXQsIGQgPT4gYXJjKGQpKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHRyYW5zbGF0ZVR3ZWVuKHRhcmdldCkge1xuICAgIHJldHVybiB0d2Vlbih0YXJnZXQsIGQgPT4gYHRyYW5zbGF0ZSgke2FyYy5jZW50cm9pZChkKX0pYCk7XG4gIH1cblxuICAvLyBHcmFiIHRoZSBJRCByYW5nZSBvZiBzZWdtZW50cyBzdGFuZCBiZXR3ZWVuXG4gIC8vIHRoaXMgc2VnbWVudCBhbmQgdGhlIGVkZ2Ugb2YgdGhlIGNpcmNsZVxuICBjb25zdCBzZWdtZW50c1RvRWRnZUNhY2hlID0ge307XG4gIGZ1bmN0aW9uIGdldFNlZ21lbnRzVG9FZGdlKGFyY0lkKSB7XG4gICAgaWYgKHNlZ21lbnRzVG9FZGdlQ2FjaGVbYXJjSWRdKSB7XG4gICAgICByZXR1cm4gc2VnbWVudHNUb0VkZ2VDYWNoZVthcmNJZF07XG4gICAgfVxuICAgIGNvbnN0IHRpbWVJbmRleCA9IE1hdGguZmxvb3IoYXJjSWQgLyBudW1Hcm91cHMpO1xuICAgIHNlZ21lbnRzVG9FZGdlQ2FjaGVbYXJjSWRdID0gW2FyY0lkICsgMSwgbnVtR3JvdXBzICogKHRpbWVJbmRleCArIDEpIC0gMV07XG5cbiAgICByZXR1cm4gc2VnbWVudHNUb0VkZ2VDYWNoZVthcmNJZF07XG4gIH1cblxuICAvLyBHZXQgdGhlIElEcyBvZiBhbGwgc2VnbWVudHMgaW4gYSB0aW1lSW5kZXhcbiAgY29uc3Qgc2VnbWVudHNJblRpbWVDYWNoZSA9IHt9O1xuICBmdW5jdGlvbiBnZXRTZWdtZW50c0luVGltZShhcmNJZCkge1xuICAgIGlmIChzZWdtZW50c0luVGltZUNhY2hlW2FyY0lkXSkge1xuICAgICAgcmV0dXJuIHNlZ21lbnRzSW5UaW1lQ2FjaGVbYXJjSWRdO1xuICAgIH1cbiAgICBjb25zdCB0aW1lSW5kZXggPSBNYXRoLmZsb29yKGFyY0lkIC8gbnVtR3JvdXBzKTtcbiAgICBzZWdtZW50c0luVGltZUNhY2hlW2FyY0lkXSA9IFt0aW1lSW5kZXggKiBudW1Hcm91cHMsICh0aW1lSW5kZXggKyAxKSAqIG51bUdyb3VwcyAtIDFdO1xuXG4gICAgcmV0dXJuIHNlZ21lbnRzSW5UaW1lQ2FjaGVbYXJjSWRdO1xuICB9XG5cbiAgbGV0IGNsaWNrSWQgPSAtMTtcbiAgbGV0IGluVHJhbnNpdGlvbiA9IGZhbHNlO1xuICBjb25zdCBhZSA9IHJvc2VXcmFwXG4gICAgLnNlbGVjdEFsbCgnZycpXG4gICAgLmRhdGEoSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShhcmNTdC5kYXRhKSkpIC8vIGRlZXAgY29weSBkYXRhIHN0YXRlXG4gICAgLmVudGVyKClcbiAgICAuYXBwZW5kKCdnJylcbiAgICAuYXR0cignY2xhc3MnLCAnc2VnbWVudCcpXG4gICAgLmNsYXNzZWQoJ2NsaWNrYWJsZScsIHRydWUpXG4gICAgLm9uKCdtb3VzZW92ZXInLCBtb3VzZW92ZXIpXG4gICAgLm9uKCdtb3VzZW91dCcsIG1vdXNlb3V0KVxuICAgIC5vbignbW91c2Vtb3ZlJywgbW91c2Vtb3ZlKVxuICAgIC5vbignY2xpY2snLCBjbGljayk7XG5cbiAgY29uc3QgbGFiZWxzID0gbGFiZWxzV3JhcFxuICAgIC5zZWxlY3RBbGwoJ2cnKVxuICAgIC5kYXRhKEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoYXJjU3QubGFiZWxzKSkpXG4gICAgLmVudGVyKClcbiAgICAuYXBwZW5kKCdnJylcbiAgICAuYXR0cignY2xhc3MnLCAncm9zZUxhYmVsJylcbiAgICAuYXR0cigndHJhbnNmb3JtJywgZCA9PiBgdHJhbnNsYXRlKCR7YXJjLmNlbnRyb2lkKGQpfSlgKTtcblxuICBsYWJlbHNcbiAgICAuYXBwZW5kKCd0ZXh0JylcbiAgICAuc3R5bGUoJ3RleHQtYW5jaG9yJywgJ21pZGRsZScpXG4gICAgLnN0eWxlKCdmaWxsJywgJyMwMDAnKVxuICAgIC50ZXh0KGQgPT4gdGltZUZvcm1hdChkLnRpbWUpKTtcblxuICBjb25zdCBncm91cExhYmVscyA9IGdyb3VwTGFiZWxzV3JhcFxuICAgIC5zZWxlY3RBbGwoJ2cnKVxuICAgIC5kYXRhKEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoYXJjU3QuZ3JvdXBMYWJlbHMpKSlcbiAgICAuZW50ZXIoKVxuICAgIC5hcHBlbmQoJ2cnKTtcblxuICBncm91cExhYmVsc1xuICAgIC5zdHlsZSgnb3BhY2l0eScsIDApXG4gICAgLmF0dHIoJ2NsYXNzJywgJ3Jvc2VHcm91cExhYmVscycpXG4gICAgLmFwcGVuZCgndGV4dCcpXG4gICAgLnN0eWxlKCd0ZXh0LWFuY2hvcicsICdtaWRkbGUnKVxuICAgIC5zdHlsZSgnZmlsbCcsICcjMDAwJylcbiAgICAudGV4dChkID0+IGQubmFtZSk7XG5cbiAgY29uc3QgYXJjcyA9IGFlXG4gICAgLmFwcGVuZCgncGF0aCcpXG4gICAgLmF0dHIoJ2NsYXNzJywgJ2FyYycpXG4gICAgLmF0dHIoJ2ZpbGwnLCBkID0+IGNvbG9yRm4oZC5uYW1lKSlcbiAgICAuYXR0cignZCcsIGFyYyk7XG5cbiAgZnVuY3Rpb24gbW91c2Vtb3ZlKCkge1xuICAgIHRvb2x0aXAoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG1vdXNlb3ZlcihiLCBpKSB7XG4gICAgdG9vbHRpcC5kYXRhKHRvb2x0aXBEYXRhKGIsIGksIGRhdHVtKSkuaGlkZGVuKGZhbHNlKTtcbiAgICBjb25zdCAkdGhpcyA9IGQzLnNlbGVjdCh0aGlzKTtcbiAgICAkdGhpcy5jbGFzc2VkKCdob3ZlcicsIHRydWUpO1xuICAgIGlmIChjbGlja0lkIDwgMCAmJiAhaW5UcmFuc2l0aW9uKSB7XG4gICAgICAkdGhpc1xuICAgICAgICAuc2VsZWN0KCdwYXRoJylcbiAgICAgICAgLmludGVycnVwdCgpXG4gICAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgICAgLmR1cmF0aW9uKDE4MClcbiAgICAgICAgLmF0dHJUd2VlbignZCcsIGFyY1R3ZWVuKGFyY1N0LmV4dGVuZFtpXSkpO1xuICAgICAgY29uc3QgZWRnZSA9IGdldFNlZ21lbnRzVG9FZGdlKGkpO1xuICAgICAgYXJjc1xuICAgICAgICAuZmlsdGVyKGQgPT4gZWRnZVswXSA8PSBkLmFyY0lkICYmIGQuYXJjSWQgPD0gZWRnZVsxXSlcbiAgICAgICAgLmludGVycnVwdCgpXG4gICAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgICAgLmR1cmF0aW9uKDE4MClcbiAgICAgICAgLmF0dHJUd2VlbignZCcsIGQgPT4gYXJjVHdlZW4oYXJjU3QucHVzaFtkLmFyY0lkXSkoZCkpO1xuICAgIH0gZWxzZSBpZiAoIWluVHJhbnNpdGlvbikge1xuICAgICAgY29uc3Qgc2VnbWVudHMgPSBnZXRTZWdtZW50c0luVGltZShjbGlja0lkKTtcbiAgICAgIGlmIChzZWdtZW50c1swXSA8PSBiLmFyY0lkICYmIGIuYXJjSWQgPD0gc2VnbWVudHNbMV0pIHtcbiAgICAgICAgJHRoaXNcbiAgICAgICAgICAuc2VsZWN0KCdwYXRoJylcbiAgICAgICAgICAuaW50ZXJydXB0KClcbiAgICAgICAgICAudHJhbnNpdGlvbigpXG4gICAgICAgICAgLmR1cmF0aW9uKDE4MClcbiAgICAgICAgICAuYXR0clR3ZWVuKCdkJywgYXJjVHdlZW4oYXJjU3QucGllT3ZlcltpXSkpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIG1vdXNlb3V0KGIsIGkpIHtcbiAgICB0b29sdGlwLmhpZGRlbih0cnVlKTtcbiAgICBjb25zdCAkdGhpcyA9IGQzLnNlbGVjdCh0aGlzKTtcbiAgICAkdGhpcy5jbGFzc2VkKCdob3ZlcicsIGZhbHNlKTtcbiAgICBpZiAoY2xpY2tJZCA8IDAgJiYgIWluVHJhbnNpdGlvbikge1xuICAgICAgJHRoaXNcbiAgICAgICAgLnNlbGVjdCgncGF0aCcpXG4gICAgICAgIC5pbnRlcnJ1cHQoKVxuICAgICAgICAudHJhbnNpdGlvbigpXG4gICAgICAgIC5kdXJhdGlvbigxODApXG4gICAgICAgIC5hdHRyVHdlZW4oJ2QnLCBhcmNUd2VlbihhcmNTdC5kYXRhW2ldKSk7XG4gICAgICBjb25zdCBlZGdlID0gZ2V0U2VnbWVudHNUb0VkZ2UoaSk7XG4gICAgICBhcmNzXG4gICAgICAgIC5maWx0ZXIoZCA9PiBlZGdlWzBdIDw9IGQuYXJjSWQgJiYgZC5hcmNJZCA8PSBlZGdlWzFdKVxuICAgICAgICAuaW50ZXJydXB0KClcbiAgICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgICAuZHVyYXRpb24oMTgwKVxuICAgICAgICAuYXR0clR3ZWVuKCdkJywgZCA9PiBhcmNUd2VlbihhcmNTdC5kYXRhW2QuYXJjSWRdKShkKSk7XG4gICAgfSBlbHNlIGlmICghaW5UcmFuc2l0aW9uKSB7XG4gICAgICBjb25zdCBzZWdtZW50cyA9IGdldFNlZ21lbnRzSW5UaW1lKGNsaWNrSWQpO1xuICAgICAgaWYgKHNlZ21lbnRzWzBdIDw9IGIuYXJjSWQgJiYgYi5hcmNJZCA8PSBzZWdtZW50c1sxXSkge1xuICAgICAgICAkdGhpc1xuICAgICAgICAgIC5zZWxlY3QoJ3BhdGgnKVxuICAgICAgICAgIC5pbnRlcnJ1cHQoKVxuICAgICAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgICAgICAuZHVyYXRpb24oMTgwKVxuICAgICAgICAgIC5hdHRyVHdlZW4oJ2QnLCBhcmNUd2VlbihhcmNTdC5waWVbaV0pKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBjbGljayhiLCBpKSB7XG4gICAgaWYgKGluVHJhbnNpdGlvbikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBkZWxheSA9IGQzLmV2ZW50LmFsdEtleSA/IDM3NTAgOiAzNzU7XG4gICAgY29uc3Qgc2VnbWVudHMgPSBnZXRTZWdtZW50c0luVGltZShpKTtcbiAgICBpZiAoY2xpY2tJZCA8IDApIHtcbiAgICAgIGluVHJhbnNpdGlvbiA9IHRydWU7XG4gICAgICBjbGlja0lkID0gaTtcbiAgICAgIGxhYmVsc1xuICAgICAgICAuaW50ZXJydXB0KClcbiAgICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgICAuZHVyYXRpb24oZGVsYXkpXG4gICAgICAgIC5hdHRyVHdlZW4oJ3RyYW5zZm9ybScsIGQgPT5cbiAgICAgICAgICB0cmFuc2xhdGVUd2Vlbih7XG4gICAgICAgICAgICBvdXRlclJhZGl1czogMCxcbiAgICAgICAgICAgIGlubmVyUmFkaXVzOiAwLFxuICAgICAgICAgICAgc3RhcnRBbmdsZTogZC5zdGFydEFuZ2xlLFxuICAgICAgICAgICAgZW5kQW5nbGU6IGQuZW5kQW5nbGUsXG4gICAgICAgICAgfSkoZCksXG4gICAgICAgIClcbiAgICAgICAgLnN0eWxlKCdvcGFjaXR5JywgMCk7XG4gICAgICBncm91cExhYmVsc1xuICAgICAgICAuYXR0cihcbiAgICAgICAgICAndHJhbnNmb3JtJyxcbiAgICAgICAgICBgdHJhbnNsYXRlKCR7YXJjLmNlbnRyb2lkKHtcbiAgICAgICAgICAgIG91dGVyUmFkaXVzOiBtYXhSYWRpdXMgKyAyMCxcbiAgICAgICAgICAgIGlubmVyUmFkaXVzOiBtYXhSYWRpdXMgKyAxNSxcbiAgICAgICAgICAgIHN0YXJ0QW5nbGU6IGFyY1N0LmRhdGFbaV0uc3RhcnRBbmdsZSxcbiAgICAgICAgICAgIGVuZEFuZ2xlOiBhcmNTdC5kYXRhW2ldLmVuZEFuZ2xlLFxuICAgICAgICAgIH0pfSlgLFxuICAgICAgICApXG4gICAgICAgIC5pbnRlcnJ1cHQoKVxuICAgICAgICAudHJhbnNpdGlvbigpXG4gICAgICAgIC5kZWxheShkZWxheSlcbiAgICAgICAgLmR1cmF0aW9uKGRlbGF5KVxuICAgICAgICAuYXR0clR3ZWVuKCd0cmFuc2Zvcm0nLCBkID0+XG4gICAgICAgICAgdHJhbnNsYXRlVHdlZW4oe1xuICAgICAgICAgICAgb3V0ZXJSYWRpdXM6IG1heFJhZGl1cyArIDIwLFxuICAgICAgICAgICAgaW5uZXJSYWRpdXM6IG1heFJhZGl1cyArIDE1LFxuICAgICAgICAgICAgc3RhcnRBbmdsZTogYXJjU3QucGllW3NlZ21lbnRzWzBdICsgZC5hcmNJZF0uc3RhcnRBbmdsZSxcbiAgICAgICAgICAgIGVuZEFuZ2xlOiBhcmNTdC5waWVbc2VnbWVudHNbMF0gKyBkLmFyY0lkXS5lbmRBbmdsZSxcbiAgICAgICAgICB9KShkKSxcbiAgICAgICAgKVxuICAgICAgICAuc3R5bGUoJ29wYWNpdHknLCBkID0+XG4gICAgICAgICAgc3RhdGUuZGlzYWJsZWRbZC5hcmNJZF0gfHwgYXJjU3QucGllW3NlZ21lbnRzWzBdICsgZC5hcmNJZF0ucGVyY2VudCA8IGxhYmVsVGhyZXNob2xkXG4gICAgICAgICAgICA/IDBcbiAgICAgICAgICAgIDogMSxcbiAgICAgICAgKTtcbiAgICAgIGFlLmNsYXNzZWQoJ2NsaWNrYWJsZScsIGQgPT4gc2VnbWVudHNbMF0gPiBkLmFyY0lkIHx8IGQuYXJjSWQgPiBzZWdtZW50c1sxXSk7XG4gICAgICBhcmNzXG4gICAgICAgIC5maWx0ZXIoZCA9PiBzZWdtZW50c1swXSA8PSBkLmFyY0lkICYmIGQuYXJjSWQgPD0gc2VnbWVudHNbMV0pXG4gICAgICAgIC5pbnRlcnJ1cHQoKVxuICAgICAgICAudHJhbnNpdGlvbigpXG4gICAgICAgIC5kdXJhdGlvbihkZWxheSlcbiAgICAgICAgLmF0dHJUd2VlbignZCcsIGQgPT4gYXJjVHdlZW4oYXJjU3QucGllU3RhcnRbZC5hcmNJZF0pKGQpKVxuICAgICAgICAudHJhbnNpdGlvbigpXG4gICAgICAgIC5kdXJhdGlvbihkZWxheSlcbiAgICAgICAgLmF0dHJUd2VlbignZCcsIGQgPT4gYXJjVHdlZW4oYXJjU3QucGllW2QuYXJjSWRdKShkKSlcbiAgICAgICAgLmVhY2goJ2VuZCcsICgpID0+IHtcbiAgICAgICAgICBpblRyYW5zaXRpb24gPSBmYWxzZTtcbiAgICAgICAgfSk7XG4gICAgICBhcmNzXG4gICAgICAgIC5maWx0ZXIoZCA9PiBzZWdtZW50c1swXSA+IGQuYXJjSWQgfHwgZC5hcmNJZCA+IHNlZ21lbnRzWzFdKVxuICAgICAgICAuaW50ZXJydXB0KClcbiAgICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgICAuZHVyYXRpb24oZGVsYXkpXG4gICAgICAgIC5hdHRyVHdlZW4oJ2QnLCBkID0+IGFyY1R3ZWVuKGFyY1N0Lm1pbmlbZC5hcmNJZF0pKGQpKTtcbiAgICB9IGVsc2UgaWYgKGNsaWNrSWQgPCBzZWdtZW50c1swXSB8fCBzZWdtZW50c1sxXSA8IGNsaWNrSWQpIHtcbiAgICAgIGluVHJhbnNpdGlvbiA9IHRydWU7XG4gICAgICBjb25zdCBjbGlja1NlZ21lbnRzID0gZ2V0U2VnbWVudHNJblRpbWUoY2xpY2tJZCk7XG4gICAgICBsYWJlbHNcbiAgICAgICAgLmludGVycnVwdCgpXG4gICAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgICAgLmRlbGF5KGRlbGF5KVxuICAgICAgICAuZHVyYXRpb24oZGVsYXkpXG4gICAgICAgIC5hdHRyVHdlZW4oJ3RyYW5zZm9ybScsIGQgPT4gdHJhbnNsYXRlVHdlZW4oYXJjU3QubGFiZWxzW2QuYXJjSWQgLyBudW1Hcm91cHNdKShkKSlcbiAgICAgICAgLnN0eWxlKCdvcGFjaXR5JywgMSk7XG4gICAgICBncm91cExhYmVsc1xuICAgICAgICAuaW50ZXJydXB0KClcbiAgICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgICAuZHVyYXRpb24oZGVsYXkpXG4gICAgICAgIC5hdHRyVHdlZW4oXG4gICAgICAgICAgJ3RyYW5zZm9ybScsXG4gICAgICAgICAgdHJhbnNsYXRlVHdlZW4oe1xuICAgICAgICAgICAgb3V0ZXJSYWRpdXM6IG1heFJhZGl1cyArIDIwLFxuICAgICAgICAgICAgaW5uZXJSYWRpdXM6IG1heFJhZGl1cyArIDE1LFxuICAgICAgICAgICAgc3RhcnRBbmdsZTogYXJjU3QuZGF0YVtjbGlja0lkXS5zdGFydEFuZ2xlLFxuICAgICAgICAgICAgZW5kQW5nbGU6IGFyY1N0LmRhdGFbY2xpY2tJZF0uZW5kQW5nbGUsXG4gICAgICAgICAgfSksXG4gICAgICAgIClcbiAgICAgICAgLnN0eWxlKCdvcGFjaXR5JywgMCk7XG4gICAgICBhZS5jbGFzc2VkKCdjbGlja2FibGUnLCB0cnVlKTtcbiAgICAgIGFyY3NcbiAgICAgICAgLmZpbHRlcihkID0+IGNsaWNrU2VnbWVudHNbMF0gPD0gZC5hcmNJZCAmJiBkLmFyY0lkIDw9IGNsaWNrU2VnbWVudHNbMV0pXG4gICAgICAgIC5pbnRlcnJ1cHQoKVxuICAgICAgICAudHJhbnNpdGlvbigpXG4gICAgICAgIC5kdXJhdGlvbihkZWxheSlcbiAgICAgICAgLmF0dHJUd2VlbignZCcsIGQgPT4gYXJjVHdlZW4oYXJjU3QucGllU3RhcnRbZC5hcmNJZF0pKGQpKVxuICAgICAgICAudHJhbnNpdGlvbigpXG4gICAgICAgIC5kdXJhdGlvbihkZWxheSlcbiAgICAgICAgLmF0dHJUd2VlbignZCcsIGQgPT4gYXJjVHdlZW4oYXJjU3QuZGF0YVtkLmFyY0lkXSkoZCkpXG4gICAgICAgIC5lYWNoKCdlbmQnLCAoKSA9PiB7XG4gICAgICAgICAgY2xpY2tJZCA9IC0xO1xuICAgICAgICAgIGluVHJhbnNpdGlvbiA9IGZhbHNlO1xuICAgICAgICB9KTtcbiAgICAgIGFyY3NcbiAgICAgICAgLmZpbHRlcihkID0+IGNsaWNrU2VnbWVudHNbMF0gPiBkLmFyY0lkIHx8IGQuYXJjSWQgPiBjbGlja1NlZ21lbnRzWzFdKVxuICAgICAgICAuaW50ZXJydXB0KClcbiAgICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgICAuZGVsYXkoZGVsYXkpXG4gICAgICAgIC5kdXJhdGlvbihkZWxheSlcbiAgICAgICAgLmF0dHJUd2VlbignZCcsIGQgPT4gYXJjVHdlZW4oYXJjU3QuZGF0YVtkLmFyY0lkXSkoZCkpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHVwZGF0ZUFjdGl2ZSgpIHtcbiAgICBjb25zdCBkZWxheSA9IGQzLmV2ZW50LmFsdEtleSA/IDMwMDAgOiAzMDA7XG4gICAgbGVnZW5kV3JhcC5kYXR1bShsZWdlbmREYXRhKGRhdHVtKSkuY2FsbChsZWdlbmQpO1xuICAgIGNvbnN0IG5BcmNTdCA9IGNvbXB1dGVBcmNTdGF0ZXMoZGF0dW0pO1xuICAgIGluVHJhbnNpdGlvbiA9IHRydWU7XG4gICAgaWYgKGNsaWNrSWQgPCAwKSB7XG4gICAgICBhcmNzXG4gICAgICAgIC5zdHlsZSgnb3BhY2l0eScsIDEpXG4gICAgICAgIC5pbnRlcnJ1cHQoKVxuICAgICAgICAudHJhbnNpdGlvbigpXG4gICAgICAgIC5kdXJhdGlvbihkZWxheSlcbiAgICAgICAgLmF0dHJUd2VlbignZCcsIGQgPT4gYXJjVHdlZW4obkFyY1N0LmRhdGFbZC5hcmNJZF0pKGQpKVxuICAgICAgICAuZWFjaCgnZW5kJywgKCkgPT4ge1xuICAgICAgICAgIGluVHJhbnNpdGlvbiA9IGZhbHNlO1xuICAgICAgICAgIGFyY1N0ID0gbkFyY1N0O1xuICAgICAgICB9KVxuICAgICAgICAudHJhbnNpdGlvbigpXG4gICAgICAgIC5kdXJhdGlvbigwKVxuICAgICAgICAuc3R5bGUoJ29wYWNpdHknLCBkID0+IChzdGF0ZS5kaXNhYmxlZFtkLmFyY0lkICUgbnVtR3JvdXBzXSA/IDAgOiAxKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHNlZ21lbnRzID0gZ2V0U2VnbWVudHNJblRpbWUoY2xpY2tJZCk7XG4gICAgICBhcmNzXG4gICAgICAgIC5zdHlsZSgnb3BhY2l0eScsIDEpXG4gICAgICAgIC5pbnRlcnJ1cHQoKVxuICAgICAgICAudHJhbnNpdGlvbigpXG4gICAgICAgIC5kdXJhdGlvbihkZWxheSlcbiAgICAgICAgLmF0dHJUd2VlbignZCcsIGQgPT5cbiAgICAgICAgICBzZWdtZW50c1swXSA8PSBkLmFyY0lkICYmIGQuYXJjSWQgPD0gc2VnbWVudHNbMV1cbiAgICAgICAgICAgID8gYXJjVHdlZW4obkFyY1N0LnBpZVtkLmFyY0lkXSkoZClcbiAgICAgICAgICAgIDogYXJjVHdlZW4obkFyY1N0Lm1pbmlbZC5hcmNJZF0pKGQpLFxuICAgICAgICApXG4gICAgICAgIC5lYWNoKCdlbmQnLCAoKSA9PiB7XG4gICAgICAgICAgaW5UcmFuc2l0aW9uID0gZmFsc2U7XG4gICAgICAgICAgYXJjU3QgPSBuQXJjU3Q7XG4gICAgICAgIH0pXG4gICAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgICAgLmR1cmF0aW9uKDApXG4gICAgICAgIC5zdHlsZSgnb3BhY2l0eScsIGQgPT4gKHN0YXRlLmRpc2FibGVkW2QuYXJjSWQgJSBudW1Hcm91cHNdID8gMCA6IDEpKTtcbiAgICAgIGdyb3VwTGFiZWxzXG4gICAgICAgIC5pbnRlcnJ1cHQoKVxuICAgICAgICAudHJhbnNpdGlvbigpXG4gICAgICAgIC5kdXJhdGlvbihkZWxheSlcbiAgICAgICAgLmF0dHJUd2VlbigndHJhbnNmb3JtJywgZCA9PlxuICAgICAgICAgIHRyYW5zbGF0ZVR3ZWVuKHtcbiAgICAgICAgICAgIG91dGVyUmFkaXVzOiBtYXhSYWRpdXMgKyAyMCxcbiAgICAgICAgICAgIGlubmVyUmFkaXVzOiBtYXhSYWRpdXMgKyAxNSxcbiAgICAgICAgICAgIHN0YXJ0QW5nbGU6IG5BcmNTdC5waWVbc2VnbWVudHNbMF0gKyBkLmFyY0lkXS5zdGFydEFuZ2xlLFxuICAgICAgICAgICAgZW5kQW5nbGU6IG5BcmNTdC5waWVbc2VnbWVudHNbMF0gKyBkLmFyY0lkXS5lbmRBbmdsZSxcbiAgICAgICAgICB9KShkKSxcbiAgICAgICAgKVxuICAgICAgICAuc3R5bGUoJ29wYWNpdHknLCBkID0+XG4gICAgICAgICAgc3RhdGUuZGlzYWJsZWRbZC5hcmNJZF0gfHwgYXJjU3QucGllW3NlZ21lbnRzWzBdICsgZC5hcmNJZF0ucGVyY2VudCA8IGxhYmVsVGhyZXNob2xkXG4gICAgICAgICAgICA/IDBcbiAgICAgICAgICAgIDogMSxcbiAgICAgICAgKTtcbiAgICB9XG4gIH1cblxuICBsZWdlbmQuZGlzcGF0Y2gub24oJ3N0YXRlQ2hhbmdlJywgbmV3U3RhdGUgPT4ge1xuICAgIGlmIChzdGF0ZS5kaXNhYmxlZCAhPT0gbmV3U3RhdGUuZGlzYWJsZWQpIHtcbiAgICAgIHN0YXRlLmRpc2FibGVkID0gbmV3U3RhdGUuZGlzYWJsZWQ7XG4gICAgICB1cGRhdGVBY3RpdmUoKTtcbiAgICB9XG4gIH0pO1xufVxuXG5Sb3NlLmRpc3BsYXlOYW1lID0gJ1Jvc2UnO1xuUm9zZS5wcm9wVHlwZXMgPSBwcm9wVHlwZXM7XG5cbmV4cG9ydCBkZWZhdWx0IFJvc2U7XG4iLCIvKipcbiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcbiAqIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxuICogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cbiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcbiAqIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcbiAqIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxuICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxuICogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cbiAqIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXG4gKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcbiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcbiAqIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5pbXBvcnQgeyByZWFjdGlmeSB9IGZyb20gJ0BzdXBlcnNldC11aS9jb3JlJztcbmltcG9ydCBDb21wb25lbnQgZnJvbSAnLi9Sb3NlJztcblxuZXhwb3J0IGRlZmF1bHQgcmVhY3RpZnkoQ29tcG9uZW50KTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBOzs7Ozs7Ozs7Ozs7Ozs7OztBQWtCQTtBQVdBO0FBbUNBO0FBMkZBO0FBQUE7QUFBQTtBQUFBO0FBaUlBO0FBQ0E7QUFZQTtBQWFBOztBQ3RUQTs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFrQkEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///2513\n')}}]);