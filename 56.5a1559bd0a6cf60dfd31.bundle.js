(window.webpackJsonp=window.webpackJsonp||[]).push([[56],{2479:function(module,__webpack_exports__,__webpack_require__){"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return AntdPluginFilterSelect; });\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(536);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(2);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(2482);\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(385);\n/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\n\n\n\nconst Styles = _superset_ui_core__WEBPACK_IMPORTED_MODULE_0__[/* styled */ \"c\"].div `\n  height: ${({ height }) => height};\n  width: ${({ width }) => width};\n`;\nconst { Option } = antd__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"];\nfunction AntdPluginFilterSelect(props) {\n    const [values, setValues] = Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useState\"])([]);\n    const DELIMITER = '!^&@%#*!@';\n    const { data, formData, height, width, setExtraFormData } = props;\n    const { defaultValues, enableEmptyFilter, multiSelect, showSearch, inverseSelection } = Object.assign(Object.assign({}, _types__WEBPACK_IMPORTED_MODULE_3__[/* DEFAULT_FORM_DATA */ \"a\"]), formData);\n    Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(() => {\n        setValues(defaultValues || []);\n    }, [defaultValues]);\n    let { groupby = [] } = formData;\n    groupby = Array.isArray(groupby) ? groupby : [groupby];\n    function handleChange(value) {\n        setValues(value || []);\n        const [col] = groupby;\n        const emptyFilter = enableEmptyFilter &&\n            !inverseSelection &&\n            (value === undefined || value === null || value.length === 0);\n        setExtraFormData({\n            append_form_data: emptyFilter\n                ? {\n                    extras: {\n                        where: '1 = 0',\n                    },\n                }\n                : {\n                    filters: value === undefined || value === null || value.length === 0\n                        ? []\n                        : [\n                            {\n                                col,\n                                op: inverseSelection ? 'NOT IN' : 'IN',\n                                val: value,\n                            },\n                        ],\n                },\n        });\n    }\n    const placeholderText = (data || []).length === 0 ? 'No data' : `${data.length} option${data.length > 1 ? 's' : 0}`;\n    return (react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(Styles, { height: height, width: width },\n        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"], { allowClear: true, value: values, showSearch: showSearch, style: { width: '100%' }, mode: multiSelect ? 'multiple' : undefined, placeholder: placeholderText, \n            // @ts-ignore\n            onChange: handleChange }, (data || []).map(row => {\n            const options = groupby.map(col => row[col]);\n            const key = options.join(DELIMITER);\n            const label = options.join(', ');\n            return (react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(Option, { key: key, value: key }, label));\n        }))));\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjQ3OS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8vVXNlcnMva2FtaWxnYWJyeWplbHNraS9wcm9qZWN0cy9zdXBlcnNldC11aS9wbHVnaW5zL3BsdWdpbi1maWx0ZXItYW50ZC9zcmMvU2VsZWN0L0FudGRTZWxlY3RGaWx0ZXIudHN4P2Y4ZTUiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXG4gKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcbiAqIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXG4gKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXG4gKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXG4gKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2VcbiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcbiAqIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXG4gKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxuICogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXG4gKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXG4gKiB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuaW1wb3J0IHsgc3R5bGVkIH0gZnJvbSAnQHN1cGVyc2V0LXVpL2NvcmUnO1xuaW1wb3J0IFJlYWN0LCB7IHVzZUVmZmVjdCwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBTZWxlY3QgfSBmcm9tICdhbnRkJztcbmltcG9ydCB7IERFRkFVTFRfRk9STV9EQVRBLCBBbnRkUGx1Z2luRmlsdGVyU2VsZWN0UHJvcHMgfSBmcm9tICcuL3R5cGVzJztcbmltcG9ydCB7IEFudGRQbHVnaW5GaWx0ZXJTdHlsZXNQcm9wcyB9IGZyb20gJy4uL3R5cGVzJztcblxuY29uc3QgU3R5bGVzID0gc3R5bGVkLmRpdjxBbnRkUGx1Z2luRmlsdGVyU3R5bGVzUHJvcHM+YFxuICBoZWlnaHQ6ICR7KHsgaGVpZ2h0IH0pID0+IGhlaWdodH07XG4gIHdpZHRoOiAkeyh7IHdpZHRoIH0pID0+IHdpZHRofTtcbmA7XG5cbmNvbnN0IHsgT3B0aW9uIH0gPSBTZWxlY3Q7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIEFudGRQbHVnaW5GaWx0ZXJTZWxlY3QocHJvcHM6IEFudGRQbHVnaW5GaWx0ZXJTZWxlY3RQcm9wcykge1xuICBjb25zdCBbdmFsdWVzLCBzZXRWYWx1ZXNdID0gdXNlU3RhdGU8KHN0cmluZyB8IG51bWJlcilbXT4oW10pO1xuICBjb25zdCBERUxJTUlURVIgPSAnIV4mQCUjKiFAJztcbiAgY29uc3QgeyBkYXRhLCBmb3JtRGF0YSwgaGVpZ2h0LCB3aWR0aCwgc2V0RXh0cmFGb3JtRGF0YSB9ID0gcHJvcHM7XG4gIGNvbnN0IHsgZGVmYXVsdFZhbHVlcywgZW5hYmxlRW1wdHlGaWx0ZXIsIG11bHRpU2VsZWN0LCBzaG93U2VhcmNoLCBpbnZlcnNlU2VsZWN0aW9uIH0gPSB7XG4gICAgLi4uREVGQVVMVF9GT1JNX0RBVEEsXG4gICAgLi4uZm9ybURhdGEsXG4gIH07XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBzZXRWYWx1ZXMoZGVmYXVsdFZhbHVlcyB8fCBbXSk7XG4gIH0sIFtkZWZhdWx0VmFsdWVzXSk7XG5cbiAgbGV0IHsgZ3JvdXBieSA9IFtdIH0gPSBmb3JtRGF0YTtcbiAgZ3JvdXBieSA9IEFycmF5LmlzQXJyYXkoZ3JvdXBieSkgPyBncm91cGJ5IDogW2dyb3VwYnldO1xuXG4gIGZ1bmN0aW9uIGhhbmRsZUNoYW5nZSh2YWx1ZT86IG51bWJlcltdIHwgc3RyaW5nW10gfCBudWxsKSB7XG4gICAgc2V0VmFsdWVzKHZhbHVlIHx8IFtdKTtcbiAgICBjb25zdCBbY29sXSA9IGdyb3VwYnk7XG4gICAgY29uc3QgZW1wdHlGaWx0ZXIgPVxuICAgICAgZW5hYmxlRW1wdHlGaWx0ZXIgJiZcbiAgICAgICFpbnZlcnNlU2VsZWN0aW9uICYmXG4gICAgICAodmFsdWUgPT09IHVuZGVmaW5lZCB8fCB2YWx1ZSA9PT0gbnVsbCB8fCB2YWx1ZS5sZW5ndGggPT09IDApO1xuICAgIHNldEV4dHJhRm9ybURhdGEoe1xuICAgICAgYXBwZW5kX2Zvcm1fZGF0YTogZW1wdHlGaWx0ZXJcbiAgICAgICAgPyB7XG4gICAgICAgICAgICBleHRyYXM6IHtcbiAgICAgICAgICAgICAgd2hlcmU6ICcxID0gMCcsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH1cbiAgICAgICAgOiB7XG4gICAgICAgICAgICBmaWx0ZXJzOlxuICAgICAgICAgICAgICB2YWx1ZSA9PT0gdW5kZWZpbmVkIHx8IHZhbHVlID09PSBudWxsIHx8IHZhbHVlLmxlbmd0aCA9PT0gMFxuICAgICAgICAgICAgICAgID8gW11cbiAgICAgICAgICAgICAgICA6IFtcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgIGNvbCxcbiAgICAgICAgICAgICAgICAgICAgICBvcDogaW52ZXJzZVNlbGVjdGlvbiA/ICdOT1QgSU4nIDogJ0lOJyxcbiAgICAgICAgICAgICAgICAgICAgICB2YWw6IHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICB9LFxuICAgIH0pO1xuICB9XG4gIGNvbnN0IHBsYWNlaG9sZGVyVGV4dCA9XG4gICAgKGRhdGEgfHwgW10pLmxlbmd0aCA9PT0gMCA/ICdObyBkYXRhJyA6IGAke2RhdGEubGVuZ3RofSBvcHRpb24ke2RhdGEubGVuZ3RoID4gMSA/ICdzJyA6IDB9YDtcbiAgcmV0dXJuIChcbiAgICA8U3R5bGVzIGhlaWdodD17aGVpZ2h0fSB3aWR0aD17d2lkdGh9PlxuICAgICAgPFNlbGVjdFxuICAgICAgICBhbGxvd0NsZWFyXG4gICAgICAgIHZhbHVlPXt2YWx1ZXN9XG4gICAgICAgIHNob3dTZWFyY2g9e3Nob3dTZWFyY2h9XG4gICAgICAgIHN0eWxlPXt7IHdpZHRoOiAnMTAwJScgfX1cbiAgICAgICAgbW9kZT17bXVsdGlTZWxlY3QgPyAnbXVsdGlwbGUnIDogdW5kZWZpbmVkfVxuICAgICAgICBwbGFjZWhvbGRlcj17cGxhY2Vob2xkZXJUZXh0fVxuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIG9uQ2hhbmdlPXtoYW5kbGVDaGFuZ2V9XG4gICAgICA+XG4gICAgICAgIHsoZGF0YSB8fCBbXSkubWFwKHJvdyA9PiB7XG4gICAgICAgICAgY29uc3Qgb3B0aW9ucyA9IGdyb3VwYnkubWFwKGNvbCA9PiByb3dbY29sXSk7XG4gICAgICAgICAgY29uc3Qga2V5ID0gb3B0aW9ucy5qb2luKERFTElNSVRFUik7XG4gICAgICAgICAgY29uc3QgbGFiZWwgPSBvcHRpb25zLmpvaW4oJywgJyk7XG4gICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxPcHRpb24ga2V5PXtrZXl9IHZhbHVlPXtrZXl9PlxuICAgICAgICAgICAgICB7bGFiZWx9XG4gICAgICAgICAgICA8L09wdGlvbj5cbiAgICAgICAgICApO1xuICAgICAgICB9KX1cbiAgICAgIDwvU2VsZWN0PlxuICAgIDwvU3R5bGVzPlxuICApO1xufVxuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOzs7Ozs7Ozs7Ozs7Ozs7OztBQWlCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQU9BO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBSUE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///2479\n")}}]);